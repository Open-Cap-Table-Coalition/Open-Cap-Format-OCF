{
  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "https://opencaptablecoalition.com/schema/types/conversion_trigger",
  "title": "Type - Conversion Trigger",
  "description": "Type representation of a convertibles conversion rights into stock upon an event (such as holder election or Change of Control)",
  "type": "object",
  "properties": {
    "ratio": {
      "description": "What number of target StockClass shares do one share of this StockClass convert into (this can be set or changed with an event where this cannot be determined at time of issuance)",
      "$ref": "https://opencaptablecoalition.com/schema/types/ratio"
    },
    "rounding_type": {
      "description": "How should fractional shares be rounded?",
      "$ref": "https://opencaptablecoalition.com/schema/enums/rounding_type"
    },
    "nickname": {
      "description": "Human-friendly nickname to describe the conversion right",
      "type": "string"
    },
    "description": {
      "description": "Legal language describiing the conversion right (ideally, this should be excerpted from the instrument where possible)",
      "type": "string"
    },
    "capitalization_definition": {
      "description": "How is capitalization defined in the convertible for purposes of calculating company capitalization to calculate the conversion ratio?",
      "type": "string"
    },
    "converts_to_future_round": {
      "description": "Is this StockClass potentially convertible into a future, as-yet undetermined StockClass (e.g. Founder Preferred)",
      "type": "boolean"
    },
    "converts_to_stock_class_id": {
      "description": "What is the id of the StockClass this StockClass can convert into?",
      "type": "string"
    }
  },
  "oneOf": [
    {
      "title": "Converts to a future round of stock (boolean)",
      "description": "Some conversion triggers let holders convert into a future round/series of stock - e.g. at the next qualified financing or some similar formulation. If this is true, such a right applies to securities using this ConversionTrigger.",
      "required": ["converts_to_future_round"]
    },
    {
      "title": "Converts to known stock class (String ID)",
      "description": "Other conversion triggers permit or require holders of a security convert it into a known StockClass, such as the right to convert Preferred into Common. If this is the case, put the target StockClass' ID here.",
      "required": ["converts_to_stock_class_id"]
    }
  ],
  "required": ["rounding_type", "description"]
}

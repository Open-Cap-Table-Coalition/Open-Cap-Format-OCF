{
  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "https://opencaptablecoalition.com/schema/types/vesting_rules",
  "title": "Type - Vesting Rules",
  "description": "Type representing all aspects related to vesting securities",
  "type": "object",
  "properties": {
    "vesting_type": {
      "description": "Whether the vesting rules are schedule-driven, event-driven, or a combination of both",
      "$ref": "/schema/enums/vesting_type"
    },
    "vesting_schedule_id": {
      "description": "Time-based vesting schedule applied to the securities",
      "type": "string"
    },
    "vesting_start_date": {
      "description": "Vesting commencement date to pair with the time-based vesting schedule",
      "$ref": "/schema/types/date"
    },
    "vesting_conditions": {
      "title": "Vesting Rules - Vesting Condition Array",
      "description": "Tree-structured schedule- and/or event-driven vesting conditions for the securities, including single- or double-trigger acceleration.\n\n**Note**: complex vesting rules which mix time-and event-based conditions should be modeled using this field, because human intervention will ultimately be required by the importing system due to the nature/complexity of the rules.",
      "type": "array",
      "items": {
        "anyOf": [
          {
            "$ref": "/schema/types/event_driven_vesting_condition"
          },
          {
            "$ref": "/schema/types/schedule_driven_vesting_condition"
          }
        ]
      }
    },
    "custom_vesting_tranches": {
      "title": "Vesting Rules - Custom Vesting Tranche Array",
      "description": "Explicitly-defined vesting tranches for the securities which can be used in place of a vesting schedule.\n\n**Note**: custom vesting tranches override the applied vesting schedule if both are present.",
      "type": "array",
      "items": {
        "$ref": "/schema/types/custom_vesting_tranche"
      }
    },
    "custom_vesting_description": {
      "description": "Description field to allow explanation of the vesting conditions which resulted in the custom vesting tranches",
      "type": "string"
    }
  },
  "required": ["vesting_type"]
}
